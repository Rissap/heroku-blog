{% extends 'wrapper.html' %}
{% load static %}

{% block title %} {{post.title}} {% endblock %}

{% block style %}{% endblock %}

{% block body %}

<section class="post">
	
	<div class="post__wrapper">
		
		{% if mail %}
			<div class="post__mail">
				<p class="post__mail-text">{{mail}}</p>
			</div>
		{% endif %}

		<h1 class="post__title">{{post.title}}</h1>
		
		Tags:{% for tag in post.tags.all %}
					<a href="/?tag={{tag}}" class="post__tags">{{tag}}</a>
		{% endfor %}

		<div class="post__details">
			<p class="post__published">{{post.publish.date}}</p>
			<p class="post_author">{{post.author}}</p>
		</div>

		<a href="{{post.get_absolute_url}}share/" class="post__share">Share via email</a>

		<p class="post__body">{{post.body}}</p>
	</div>

	<div class="similar">
		<h2 class="similar__header">Similar posts:</h2>
		{% for post in similars%}
			<div class="similar__wrapper">
				<a href="{{post.get_absolute_url}}" class="similar__title">{{post.title}}</a>
			</div>
		{% empty %}
			<p class="similar__error">There is no similar posts yet.</p>
		{% endfor %}

	</div>

</section>

<section class="comment">
	
	<div class="comment__wrapper">
		<p class="comment__add">Add your comment:</p>
		<form class="comment__form" method="POST" action="">
			{% csrf_token %}
			{{comment_form.as_p}}
			<button class="comment__submit">Submit</button>
			
		</form>

		{% with comments.count as total_comments %}
			<h3 class="comment__total">{{total_comments}} comments in total</h3>
		{% endwith %}

		{% for comment in comments %}
		<div class="comment__comment">
			<p class="comment__title">by {{comment.name}}</p>
			<p class="comment__body">{{comment.body}}</p>
		</div>		
		{% endfor %}

</section>

{% endblock %}